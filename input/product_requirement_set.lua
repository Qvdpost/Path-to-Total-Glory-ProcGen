product_requirement_set = {
    {"TW_WH1_BEASTMEN", "core_base_beastmen_req"},
    {"TW_WH2_DLC17_SILENCE", "core_base_beastmen_req_silence"},
    {"TW_WH1_BRETONNIA_FREE", "core_base_bretonnia_req"},
    {"TW_WH2_DLC14_REPANSE_FREE", "core_base_bretonnia_req_repanse"},
    {"TW_WH2_BASE_GAME", "core_base_dark_elves_req"},
    {"TW_WH2_DLC10_QUEEN_CRONE", "core_base_dark_elves_req_queen"},
    {"TW_WH2_DLC14_SHADOW", "core_base_dark_elves_req_shadow"},
    {"TW_WH1_BASE_GAME", "core_base_dwarfs_req"},
    {"TW_WH1_LORDS_AND_UNITS_2", "core_base_dwarfs_req_king"},
    {"TW_WH3_THRONES_OF_DECAY_DWF", "core_base_dwarfs_req_tod"},
    {"TW_WH1_BASE_GAME", "core_base_empire_req"},
    {"TW_WH1_LORDS_AND_UNITS_1", "core_base_empire_req_grim"},
    {"TW_WH2_DLC13_HUNTER", "core_base_empire_req_hunter"},
    {"TW_WH3_THRONES_OF_DECAY_EMP", "core_base_empire_req_tod"},
    {"TW_WH1_BASE_GAME", "core_base_greenskins_req"},
    {"TW_WH1_LORDS_AND_UNITS_2", "core_base_greenskins_req_king"},
    {"TW_WH2_DLC15_WARDEN", "core_base_greenskins_req_warden"},
    {"TW_WH2_BASE_GAME", "core_base_high_elves_req"},
    {"TW_WH2_DLC10_QUEEN_CRONE", "core_base_high_elves_req_queen"},
    {"TW_WH2_DLC15_WARDEN", "core_base_high_elves_req_warden"},
    {"TW_WH2_BASE_GAME", "core_base_lizardmen_req"},
    {"TW_WH2_DLC13_HUNTER", "core_base_lizardmen_req_hunter"},
    {"TW_WH2_DLC12_PROPHET", "core_base_lizardmen_req_prophet"},
    {"TW_WH2_DLC17_SILENCE", "core_base_lizardmen_req_silence"},
    {"TW_WH1_NORSCA", "core_base_norsca_req"},
    {"TW_WH2_BASE_GAME", "core_base_skaven_req"},
    {"TW_WH2_DLC12_PROPHET", "core_base_skaven_req_prophet"},
    {"TW_WH2_DLC14_SHADOW", "core_base_skaven_req_shadow"},
    {"TW_WH2_DLC16_TWILIGHT", "core_base_skaven_req_twilight"},
    {"TW_WH1_BASE_GAME", "core_base_vampire_counts_req"},
    {"TW_WH1_LORDS_AND_UNITS_1", "core_base_vampire_counts_req_grim"},
    {"TW_WH1_WOOD_ELVES", "core_base_wood_elves_req"},
    {"TW_WH2_DLC16_TWILIGHT", "core_base_wood_elves_req_twilight"},
    {"TW_WH1_BASE_GAME", "wh1_base_game_req"},
    {"TW_WH1_BEASTMEN", "wh1_beastmen_req"},
    {"TW_WH1_BRETONNIA_FREE", "wh1_bretonnia_free_req"},
    {"TW_WH1_CHAOS", "wh1_chaos_req"},
    {"TW_WH1_GREY_WIZARD_FREE", "wh1_grey_wizard_free_hunter_req"},
    {"TW_WH2_DLC13_HUNTER", "wh1_grey_wizard_free_hunter_req"},
    {"TW_WH1_GREY_WIZARD_FREE", "wh1_grey_wizard_free_lords1_req"},
    {"TW_WH1_LORDS_AND_UNITS_1", "wh1_grey_wizard_free_lords1_req"},
    {"TW_WH1_BASE_GAME", "wh1_grey_wizard_free_req"},
    {"TW_WH1_GROMBRINDAL", "wh1_grombrindal_lords2_req"},
    {"TW_WH1_LORDS_AND_UNITS_2", "wh1_grombrindal_lords2_req"},
    {"TW_WH1_BASE_GAME", "wh1_grombrindal_req"},
    {"TW_WH1_GROMBRINDAL", "wh1_grombrindal_req"},
    {"TW_WH1_GROMBRINDAL", "wh1_grombrindal_tod_dwf_req"},
    {"TW_WH3_THRONES_OF_DECAY_DWF", "wh1_grombrindal_tod_dwf_req"},
    {"TW_WH1_ISABELLA_FREE", "wh1_isabella_free_lords1_req"},
    {"TW_WH1_LORDS_AND_UNITS_1", "wh1_isabella_free_lords1_req"},
    {"TW_WH1_BASE_GAME", "wh1_isabella_free_req"},
    {"TW_WH1_ISABELLA_FREE", "wh1_isabella_free_req"},
    {"TW_WH1_JADE_WIZARD_FREE", "wh1_jade_wizard_free_hunter_req"},
    {"TW_WH2_DLC13_HUNTER", "wh1_jade_wizard_free_hunter_req"},
    {"TW_WH1_JADE_WIZARD_FREE", "wh1_jade_wizard_free_lords1_req"},
    {"TW_WH1_LORDS_AND_UNITS_1", "wh1_jade_wizard_free_lords1_req"},
    {"TW_WH1_BASE_GAME", "wh1_jade_wizard_free_req"},
    {"TW_WH1_BASE_GAME", "wh1_krell_free_req"},
    {"TW_WH1_KRELL_FREE", "wh1_krell_free_req"},
    {"TW_WH1_LORDS_AND_UNITS_1", "wh1_lords_and_units_1_req"},
    {"TW_WH1_LORDS_AND_UNITS_2", "wh1_lords_and_units_2_free_lords2_req"},
    {"TW_WH1_LORDS_AND_UNITS_2_FREE", "wh1_lords_and_units_2_free_lords2_req"},
    {"TW_WH1_BASE_GAME", "wh1_lords_and_units_2_free_req"},
    {"TW_WH1_LORDS_AND_UNITS_2_FREE", "wh1_lords_and_units_2_free_req"},
    {"TW_WH1_LORDS_AND_UNITS_2_FREE", "wh1_lords_and_units_2_free_warden_req"},
    {"TW_WH2_DLC15_WARDEN", "wh1_lords_and_units_2_free_warden_req"},
    {"TW_WH1_LORDS_AND_UNITS_2", "wh1_lords_and_units_2_req"},
    {"TW_WH1_NORSCA", "wh1_norsca_req"},
    {"TW_WH1_REGIMENTS_OF_RENOWN_FREE", "wh1_regiments_of_renown_free_req"},
    {"TW_WH1_WOOD_ELVES", "wh1_wood_elves_req"},
    {"TW_WH2_DLC13_HUNTER", "wh2_amethyst_wizard_free_hunter_req"},
    {"TW_WH1_LORDS_AND_UNITS_1", "wh2_amethyst_wizard_free_lords1_req"},
    {"TW_WH1_BASE_GAME", "wh2_amethyst_wizard_free_req"},
    {"TW_WH3_THRONES_OF_DECAY_EMP", "wh2_amethyst_wizard_free_req_tod"},
    {"TW_WH2_BASE_GAME", "wh2_base_game_req"},
    {"TW_WH1_LORDS_AND_UNITS_2", "wh2_black_orc_big_boss_free_lords2_req"},
    {"TW_WH2_BLACK_ORC_BIG_BOSS_FREE", "wh2_black_orc_big_boss_free_lords2_req"},
    {"TW_WH1_BASE_GAME", "wh2_black_orc_big_boss_free_req"},
    {"TW_WH2_BLACK_ORC_BIG_BOSS_FREE", "wh2_black_orc_big_boss_free_req"},
    {"TW_WH2_BLACK_ORC_BIG_BOSS_FREE", "wh2_black_orc_big_boss_free_warden_req"},
    {"TW_WH2_DLC15_WARDEN", "wh2_black_orc_big_boss_free_warden_req"},
    {"TW_WH2_BONE_GIANT_FREE", "wh2_bone_giant_free_req"},
    {"TW_WH2_TOMB_KINGS", "wh2_bone_giant_free_req"},
    {"TW_WH2_DLC10_ALITH_ANAR_FREE", "wh2_dlc10_alith_anar_free_queen_req"},
    {"TW_WH2_DLC10_QUEEN_CRONE", "wh2_dlc10_alith_anar_free_queen_req"},
    {"TW_WH2_BASE_GAME", "wh2_dlc10_alith_anar_free_req"},
    {"TW_WH2_DLC10_ALITH_ANAR_FREE", "wh2_dlc10_alith_anar_free_req"},
    {"TW_WH2_DLC10_ALITH_ANAR_FREE", "wh2_dlc10_alith_anar_free_warden_req"},
    {"TW_WH2_DLC15_WARDEN", "wh2_dlc10_alith_anar_free_warden_req"},
    {"TW_WH2_DLC10_QUEEN_CRONE", "wh2_dlc10_queen_crone_req"},
    {"TW_WH2_DLC10_QUEEN_CRONE", "wh2_dlc11_lokhir_free_queen_req"},
    {"TW_WH2_DLC11_LOKHIR_FREE", "wh2_dlc11_lokhir_free_queen_req"},
    {"TW_WH2_BASE_GAME", "wh2_dlc11_lokhir_free_req"},
    {"TW_WH2_DLC11_LOKHIR_FREE", "wh2_dlc11_lokhir_free_req"},
    {"TW_WH2_DLC11_LOKHIR_FREE", "wh2_dlc11_lokhir_free_shadow_req"},
    {"TW_WH2_DLC14_SHADOW", "wh2_dlc11_lokhir_free_shadow_req"},
    {"TW_WH2_DLC11_VAMPIRE_COAST", "wh2_dlc11_vampire_coast_req"},
    {"TW_WH2_DLC12_PROPHET", "wh2_dlc12_prophet_req"},
    {"TW_WH2_DLC12_TIKTAQTO_FREE", "wh2_dlc12_tiktaqto_free_hunter_req"},
    {"TW_WH2_DLC13_HUNTER", "wh2_dlc12_tiktaqto_free_hunter_req"},
    {"TW_WH2_DLC12_PROPHET", "wh2_dlc12_tiktaqto_free_prophet_req"},
    {"TW_WH2_DLC12_TIKTAQTO_FREE", "wh2_dlc12_tiktaqto_free_prophet_req"},
    {"TW_WH2_BASE_GAME", "wh2_dlc12_tiktaqto_free_req"},
    {"TW_WH2_DLC12_TIKTAQTO_FREE", "wh2_dlc12_tiktaqto_free_req"},
    {"TW_WH2_DLC12_TIKTAQTO_FREE", "wh2_dlc12_tiktaqto_free_silence_req"},
    {"TW_WH2_DLC17_SILENCE", "wh2_dlc12_tiktaqto_free_silence_req"},
    {"TW_WH2_DLC13_GOR_ROK_FREE", "wh2_dlc13_gor_rok_free_hunter_req"},
    {"TW_WH2_DLC13_HUNTER", "wh2_dlc13_gor_rok_free_hunter_req"},
    {"TW_WH2_DLC12_PROPHET", "wh2_dlc13_gor_rok_free_prophet_req"},
    {"TW_WH2_DLC13_GOR_ROK_FREE", "wh2_dlc13_gor_rok_free_prophet_req"},
    {"TW_WH2_BASE_GAME", "wh2_dlc13_gor_rok_free_req"},
    {"TW_WH2_DLC13_GOR_ROK_FREE", "wh2_dlc13_gor_rok_free_req"},
    {"TW_WH2_DLC13_GOR_ROK_FREE", "wh2_dlc13_gor_rok_free_silence_req"},
    {"TW_WH2_DLC17_SILENCE", "wh2_dlc13_gor_rok_free_silence_req"},
    {"TW_WH2_DLC13_HUNTER", "wh2_dlc13_hunter_req"},
    {"TW_WH2_DLC14_REPANSE_FREE", "wh2_dlc14_repanse_free_req"},
    {"TW_WH2_DLC14_SHADOW", "wh2_dlc14_shadow_req"},
    {"TW_WH2_DLC10_QUEEN_CRONE", "wh2_dlc15_imrik_free_queen_req"},
    {"TW_WH2_DLC15_IMRIK_FREE", "wh2_dlc15_imrik_free_queen_req"},
    {"TW_WH2_BASE_GAME", "wh2_dlc15_imrik_free_req"},
    {"TW_WH2_DLC15_IMRIK_FREE", "wh2_dlc15_imrik_free_req"},
    {"TW_WH2_DLC15_IMRIK_FREE", "wh2_dlc15_imrik_free_warden_req"},
    {"TW_WH2_DLC15_WARDEN", "wh2_dlc15_imrik_free_warden_req"},
    {"TW_WH2_DLC15_WARDEN", "wh2_dlc15_warden_req"},
    {"TW_WH2_DLC12_PROPHET", "wh2_dlc16_chieftan_free_prophet_req"},
    {"TW_WH2_DLC16_CHIEFTAIN_FREE", "wh2_dlc16_chieftan_free_prophet_req"},
    {"TW_WH2_BASE_GAME", "wh2_dlc16_chieftan_free_req"},
    {"TW_WH2_DLC16_CHIEFTAIN_FREE", "wh2_dlc16_chieftan_free_req"},
    {"TW_WH2_DLC14_SHADOW", "wh2_dlc16_chieftan_free_shadow_req"},
    {"TW_WH2_DLC16_CHIEFTAIN_FREE", "wh2_dlc16_chieftan_free_shadow_req"},
    {"TW_WH2_DLC16_CHIEFTAIN_FREE", "wh2_dlc16_chieftan_free_twilight_req"},
    {"TW_WH2_DLC16_TWILIGHT", "wh2_dlc16_chieftan_free_twilight_req"},
    {"TW_WH2_DLC16_TWILIGHT", "wh2_dlc16_twilight_req"},
    {"TW_WH2_DLC17_SILENCE", "wh2_dlc17_silence_req"},
    {"TW_WH1_LORDS_AND_UNITS_2", "wh2_dlc17_thorek_free_lords2_req"},
    {"TW_WH2_DLC17_THOREK_FREE", "wh2_dlc17_thorek_free_lords2_req"},
    {"TW_WH1_BASE_GAME", "wh2_dlc17_thorek_free_req"},
    {"TW_WH2_DLC17_THOREK_FREE", "wh2_dlc17_thorek_free_req"},
    {"TW_WH2_DLC17_THOREK_FREE", "wh2_dlc17_thorek_free_tod_dwf_req"},
    {"TW_WH3_THRONES_OF_DECAY_DWF", "wh2_dlc17_thorek_free_tod_dwf_req"},
    {"TW_WH2_DLC16_TWILIGHT", "wh2_glade_captain_twilight_req"},
    {"TW_WH2_TWA_02_GLADE_CAPTAIN", "wh2_glade_captain_twilight_req"},
    {"TW_WH1_WOOD_ELVES", "wh2_glade_captain_wood_elves_req"},
    {"TW_WH2_TWA_02_GLADE_CAPTAIN", "wh2_glade_captain_wood_elves_req"},
    {"TW_WH2_GOTREK_FELIX", "wh2_gotrek_felix_req"},
    {"TW_WH3_THRONES_OF_DECAY_DWF", "wh2_gotrek_felix_req_thrones_dwf"},
    {"TW_WH1_BEASTMEN", "wh2_great_bray_shaman_beastmen_req"},
    {"TW_WH2_TWA_04_GREAT_BRAY_SHAMAN", "wh2_great_bray_shaman_beastmen_req"},
    {"TW_WH2_DLC17_SILENCE", "wh2_great_bray_shaman_silence_req"},
    {"TW_WH2_TWA_04_GREAT_BRAY_SHAMAN", "wh2_great_bray_shaman_silence_req"},
    {"TW_WH2_DLC10_QUEEN_CRONE", "wh2_rakarth_queen_req"},
    {"TW_WH2_TWA_03_RAKARTH", "wh2_rakarth_queen_req"},
    {"TW_WH2_BASE_GAME", "wh2_rakarth_req"},
    {"TW_WH2_TWA_03_RAKARTH", "wh2_rakarth_req"},
    {"TW_WH2_DLC14_SHADOW", "wh2_rakarth_shadow_req"},
    {"TW_WH2_TWA_03_RAKARTH", "wh2_rakarth_shadow_req"},
    {"TW_WH1_LORDS_AND_UNITS_2", "wh2_spider_shrine_lords2_req"},
    {"TW_WH2_TWA_01_SPIDER_SHRINE", "wh2_spider_shrine_lords2_req"},
    {"TW_WH1_BASE_GAME", "wh2_spider_shrine_req"},
    {"TW_WH2_TWA_01_SPIDER_SHRINE", "wh2_spider_shrine_req"},
    {"TW_WH2_DLC15_WARDEN", "wh2_spider_shrine_warden_req"},
    {"TW_WH2_TWA_01_SPIDER_SHRINE", "wh2_spider_shrine_warden_req"},
    {"TW_WH2_TOMB_KINGS", "wh2_tomb_kings_req"},
    {"TW_WH2_DLC12_PROPHET", "wh2_tretch_free_prophet_req"},
    {"TW_WH2_TRETCH_FREE", "wh2_tretch_free_prophet_req"},
    {"TW_WH2_BASE_GAME", "wh2_tretch_free_req"},
    {"TW_WH2_TRETCH_FREE", "wh2_tretch_free_req"},
    {"TW_WH2_DLC14_SHADOW", "wh2_tretch_free_shadow_req"},
    {"TW_WH2_TRETCH_FREE", "wh2_tretch_free_shadow_req"},
    {"TW_WH2_DLC16_TWILIGHT", "wh2_tretch_free_twilight_req"},
    {"TW_WH2_TRETCH_FREE", "wh2_tretch_free_twilight_req"},
    {"TW_WH3_DLC20_CHAMPIONS", "wh3_dlc20_champions_req"},
    {"TW_WH3_CHAOS_WARRIORS_FREE", "wh3_dlc20_chaos_warriors_free_req"},
    {"TW_WH3_CHAOS_DWARFS", "wh3_dlc23_chaos_dwarfs_req"},
    {"TW_WH3_ULRIKA_FREE", "wh3_dlc23_ulrika_free_req"},
    {"TW_WH3_AEKOLD_FREE", "wh3_dlc24_aekold_free_req"},
    {"TW_WH3_SHADOWS_OF_CHANGE", "wh3_dlc24_shadows_of_change_req"},
    {"TW_WH3_EPIDEMIUS_FREE", "wh3_dlc25_epidemius_free_req"},
    {"TW_WH3_THRONES_OF_DECAY_DWF", "wh3_dlc25_thrones_of_decay_dwf_req"},
    {"TW_WH3_THRONES_OF_DECAY_EMP", "wh3_dlc25_thrones_of_decay_emp_req"},
    {"TW_WH3_THRONES_OF_DECAY_NUR", "wh3_dlc25_thrones_of_decay_nur_req"},
    {"TW_WH3_DLC20_CHAMPIONS", "wh3_dlc25_tod_and_coc_building_lock_req_coc"},
    {"TW_WH3_THRONES_OF_DECAY_NUR", "wh3_dlc25_tod_and_coc_building_lock_req_tod"},
    {"TW_WH3_DLC20_CHAMPIONS", "wh3_harald_hammerstorm_coc_req"},
    {"TW_WH3_PRO11_HARALD_HAMMERSTORM", "wh3_harald_hammerstorm_coc_req"},
    {"TW_WH1_CHAOS", "wh3_harald_hammerstorm_woc_req"},
    {"TW_WH3_PRO11_HARALD_HAMMERSTORM", "wh3_harald_hammerstorm_woc_req"},
    {"TW_WH3_OGRE_KINGDOMS", "wh3_ogre_kingdoms_req"},
}

requirement_set_products = {}

for _, prod_set in pairs(product_requirement_set) do
    
    if requirement_set_products[prod_set[2]] then
        table.insert(requirement_set_products[prod_set[2]], prod_set[1])
    else
        requirement_set_products[prod_set[2]] = {prod_set[1]}
    end
end

for dlc, req_sets in pairs(requirement_set_products) do
    local uniques = {}
    for _, key in pairs(req_sets) do
        uniques[key] = true
    end
    local unique_array = {}
    for key, val in pairs(uniques) do
        table.insert(unique_array, key)
    end
    requirement_set_products[dlc] = unique_array
end